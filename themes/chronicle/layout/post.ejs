<article class="post">
  <header class="post__header">
    <h1 class="post__title"><%= page.title %></h1>
    <div class="post__meta">
      <time datetime="<%= date(page.date, 'YYYY-MM-DD') %>"><%= date(page.date, 'YYYY-MM-DD') %></time>
      <% if (theme.reading_time) { %>
        <span class="post__sep">&middot;</span>
        <span class="post__reading-time"><%= Math.max(1, Math.ceil(strip_html(page.content).length / 500)) %> min read</span>
      <% } %>
      <% if (page.categories && page.categories.length) { %>
        <span class="post__sep">&middot;</span>
        <% page.categories.forEach(function(cat) { %>
          <a class="post__category" href="<%- url_for(cat.path) %>"><%= cat.name %></a>
        <% }) %>
      <% } %>
    </div>
    <% if (page.tags && page.tags.length) { %>
    <div class="post__tags">
      <% page.tags.forEach(function(tag) { %>
        <a class="tag-pill" href="<%- url_for(tag.path) %>"><%= tag.name %></a>
      <% }) %>
    </div>
    <% } %>
  </header>

  <div class="post__layout">
    <%- partial('_partial/toc') %>
    <div class="post__content" id="post-content">
      <%- page.content %>
    </div>
  </div>

  <footer class="post__footer">
    <% if (theme.copyright) { %>
    <div class="post__copyright">
      <p>Author: <%= config.author || config.title %></p>
      <p>Link: <a href="<%- page.permalink %>"><%= page.permalink %></a></p>
      <p>License: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></p>
    </div>
    <% } %>

    <% if (theme.post_nav) { %>
    <nav class="post-nav">
      <% if (page.prev) { %>
      <a class="post-nav__link post-nav__prev" href="<%- url_for(page.prev.path) %>">
        <span class="post-nav__label">&larr; Previous</span>
        <span class="post-nav__title"><%= page.prev.title %></span>
      </a>
      <% } else { %>
      <span class="post-nav__link post-nav__prev"></span>
      <% } %>
      <% if (page.next) { %>
      <a class="post-nav__link post-nav__next" href="<%- url_for(page.next.path) %>">
        <span class="post-nav__label">Next &rarr;</span>
        <span class="post-nav__title"><%= page.next.title %></span>
      </a>
      <% } %>
    </nav>
    <% } %>
  </footer>
</article>
